<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3c.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" template="template/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<ui:define name="title">
		<h:outputText value="#{staticView.applicationName}" />
	</ui:define>

	<ui:define name="header">
		<ui:include src="template/header.xhtml" />
		<script src="https://maps.google.com/maps/api/js?key=AIzaSyCsA6hQ1C8D6IIeB_r2WDEEgPelvpUWIf8&amp;region=MA" type="text/javascript" />
	</ui:define>

	<ui:define name="sider">
		<ui:include src="template/sider.xhtml" />
	</ui:define>

	<ui:define name="navigator">
		<ul class="breadcrumb">
			<li>
				<i class="ace-icon fa fa-home" />
				<a href="#">
					<h:outputText value="Main Menu" />
				</a>
			</li>
			<li class="active">
				<h:outputText value="View TransportationRequest" />
			</li>
		</ul>
	</ui:define>

	<ui:define name="body">
		<p:importEnum type="ma.azdad.model.TransportationRequestStatus" var="TransportationRequestStatus" allSuffix="ALL_ENUM_VALUES" />
		<h:form id="main_form">
			<div class="page-header hidden-xs">
				<h1>
					<i class="ace-icon fa fa-list-alt bigger-110 green"></i>
					<h:outputText value=" View TransportationRequest" />
					<small>
						<i class="ace-icon fa fa-angle-double-right"></i>
						<h:outputText value=" #{transportationRequestView.transportationRequest.numero}" />
					</small>
				</h1>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div class=" col-sm-offset-1 col-sm-7">
						<h:outputLink styleClass="btn btn-app btn-sm btn-success hover aa-tooltip tooltip-success" title="Return to Home " value="index.xhtml">
							<i class="ace-icon fa fa-home bigger-230"></i>
							<h:outputText value="Home" />
						</h:outputLink>

						<h:outputLink styleClass="btn btn-app btn-sm btn-primary hover aa-tooltip tooltip-info" title="Reload page">
							<i class="ace-icon fa fa-refresh bigger-230"></i>
							<h:outputText value="Reload" />
						</h:outputLink>

						<h:outputLink styleClass="btn btn-app btn-sm hover aa-tooltip" title="Previous Page" value="javascript: window.history.go(-1)">
							<i class="ace-icon fa fa-undo bigger-230"></i>
							<h:outputText value="Back" />
						</h:outputLink>

						<h:outputLink styleClass="btn btn-app btn-sm btn-warning hover aa-tooltip tooltip-warning" title="Edit" value="addEditTransportationRequest.xhtml"
							rendered="#{transportationRequestView.canSaveTransportationRequest()}">
							<i class="ace-icon fa fa-edit bigger-230"></i>
							<h:outputText value="Edit" />
							<f:param name="id" value="#{transportationRequestView.selectedId}" />
						</h:outputLink>

						<p:commandLink title="Request" styleClass="btn btn-app btn-sm btn-info hover aa-tooltip" onclick="PF('requestDlg').show()"
							rendered="#{transportationRequestView.canRequestTransportationRequest()}">
							<i class="ace-icon fa fa-external-link bigger-230"></i>
							<h:outputText value="Request" />
						</p:commandLink>

						<p:commandLink title="Approve" styleClass="btn btn-app btn-sm btn-success hover aa-tooltip" onclick="PF('approveDlg').show()"
							rendered="#{transportationRequestView.canApproveTransportationRequest()}">
							<i class="ace-icon fa fa-check bigger-230"></i>
							<h:outputText value="Approve" />
						</p:commandLink>

						<!-- <p:commandLink title="Assign" styleClass="btn btn-app btn-sm btn-info hover aa-tooltip" onclick="PF('assignDlg').show()" rendered="#{transportationRequestView.canAssignTransportationRequest()}">
							<i class="ace-icon fa fa-link bigger-230"></i>
							<h:outputText value="Assign" />
						</p:commandLink> -->

						<!-- <p:commandLink title="Pickup" styleClass="btn btn-app btn-sm btn-warning hover aa-tooltip" onclick="PF('pickupDlg').show()" rendered="#{transportationRequestView.canPickupTransportationRequest()}">
							<i class="ace-icon fa fa-cubes bigger-230"></i>
							<h:outputText value="Pickup" />
						</p:commandLink> -->

						<!-- <p:commandLink title="Deliver" styleClass="btn btn-app btn-sm btn-success hover aa-tooltip" onclick="PF('deliverDlg').show()" rendered="#{transportationRequestView.canDeliverTransportationRequest()}">
							<i class="ace-icon fa fa-check bigger-230"></i>
							<h:outputText value="Deliver" />
						</p:commandLink> -->

						<p:commandLink title="Acknowledge" styleClass="btn btn-app btn-sm btn-purple hover aa-tooltip" onclick="PF('acknowledgeDlg').show()"
							rendered="#{transportationRequestView.canAcknowledgeTransportationRequest()}">
							<i class="ace-icon fa fa-check bigger-230"></i>
							<h:outputText value="Acknow" />
						</p:commandLink>


						<p:commandLink title="Reject" styleClass="btn btn-app btn-sm btn-danger hover aa-tooltip tooltip-error" onclick="PF('rejectDlg').show()"
							rendered="#{transportationRequestView.canRejectTransportationRequest()}">
							<i class="ace-icon fa fa-remove bigger-230"></i>
							<h:outputText value="Reject" />
						</p:commandLink>

						<p:commandLink title="Cancel" styleClass="btn btn-app btn-sm btn-danger hover aa-tooltip tooltip-error" onclick="PF('cancelDlg').show()"
							rendered="#{transportationRequestView.canCancelTransportationRequest()}">
							<i class="ace-icon fa fa-remove bigger-230"></i>
							<h:outputText value="Cancel" />
						</p:commandLink>

						<p:commandLink title="Delete" styleClass="btn btn-app btn-sm btn-danger hover aa-tooltip tooltip-error" onclick="PF('deleteDlg').show()"
							rendered="#{transportationRequestView.canDeleteTransportationRequest()}">
							<i class="ace-icon fa fa-trash-o bigger-230"></i>
							<h:outputText value="Delete" />
						</p:commandLink>

						<p:commandLink title="Add Files" styleClass="btn btn-app btn-sm btn-success hover aa-tooltip tooltip-success" onclick="PF('uploadTransportationRequestFileDlg').show()">
							<i class="ace-icon fa fa-file bigger-230"></i>
							<h:outputText value="Files" />
						</p:commandLink>

					</div>
				</div>
			</div>
			<div class="hr dotted" />
			<div class="row">
				<div class="col-sm-offset-1 col-sm-10">
					<div class="widget-box transparent">
						<div class="widget-header widget-header-flat">
							<h4 class="lighter">
								<i class="ace-icon fa fa-clock-o orange"></i>
								<h:outputText value=" Time Line" />
							</h4>
						</div>
						<div class="widget-body">
							<ul class="steps">
								<li class="complete">
									<span class="step">
										<h:outputText value="1" />
									</span>
									<span class="title">
										<h:outputText id="step1" value="#{TransportationRequestStatus.EDITED.value}" />
									</span>
									<p:overlayPanel for="step1" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
										<h:outputText escape="false"
											value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date1,transportationRequestView.transportationRequest.deliveryRequest.requester.username)}" />
									</p:overlayPanel>
								</li>
								<f:subview rendered="#{transportationRequestView.transportationRequest.date2!=null || transportationRequestView.transportationRequest.date9==null}">
									<li class="#{transportationRequestView.transportationRequest.date2!=null?'complete':''}">
										<span class="step">
											<i class="ace-icon fa fa-spinner fa-spin grey" />
										</span>
										<span class="title">
											<h:outputText id="step2" value="#{TransportationRequestStatus.REQUESTED.value}" />
										</span>
										<p:overlayPanel for="step2" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
											<h:outputText escape="false"
												value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date2,transportationRequestView.transportationRequest.deliveryRequest.requester.username)}" />
										</p:overlayPanel>
									</li>
								</f:subview>
								<f:subview rendered="#{transportationRequestView.transportationRequest.date8==null}">
									<f:subview rendered="#{transportationRequestView.transportationRequest.date3!=null || transportationRequestView.transportationRequest.date9==null}">
										<li class="#{transportationRequestView.transportationRequest.date3!=null?'complete':''}">
											<span class="step">
												<i class="ace-icon fa fa-spinner fa-spin grey" />
											</span>
											<span class="title">
												<h:outputText id="step3" value="#{TransportationRequestStatus.APPROVED.value}" />
												<p:overlayPanel for="step3" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
													<h:outputText escape="false"
														value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date3,transportationRequestView.transportationRequest.user3.username,transportationRequestView.transportationRequest.deliveryRequest.project.manager.username)}" />
												</p:overlayPanel>
											</span>
										</li>
									</f:subview>
									<f:subview rendered="#{transportationRequestView.transportationRequest.date4!=null || transportationRequestView.transportationRequest.date9==null}">
										<li class="#{transportationRequestView.transportationRequest.date4!=null?'complete':''}">
											<span class="step">
												<i class="ace-icon fa fa-spinner fa-spin grey" />
											</span>
											<span class="title">
												<h:outputText id="step4" value="#{TransportationRequestStatus.ASSIGNED.value}" />
												<p:overlayPanel for="step4" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
													<h:outputText escape="false"
														value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date4,transportationRequestView.transportationRequest.user4.username,'y.bouassem')}" />
												</p:overlayPanel>
											</span>
										</li>
									</f:subview>
									<f:subview rendered="#{transportationRequestView.transportationRequest.date5!=null || transportationRequestView.transportationRequest.date9==null}">
										<li class="#{transportationRequestView.transportationRequest.date5!=null?'complete':''}">
											<span class="step">
												<i class="ace-icon fa fa-spinner fa-spin grey" />
											</span>
											<span class="title">
												<h:outputText id="step5" value="#{TransportationRequestStatus.PICKEDUP.value}" />
												<p:overlayPanel for="step5" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
													<h:outputText escape="false"
														value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date5,transportationRequestView.transportationRequest.user5.username,'y.bouassem')}" />
												</p:overlayPanel>
											</span>
										</li>
									</f:subview>
									<f:subview rendered="#{transportationRequestView.transportationRequest.date6!=null || transportationRequestView.transportationRequest.date9==null}">
										<li class="#{transportationRequestView.transportationRequest.date6!=null?'complete':''}">
											<span class="step">
												<i class="ace-icon fa fa-spinner fa-spin grey" />
											</span>
											<span class="title">
												<h:outputText id="step6" value="#{TransportationRequestStatus.DELIVERED.value}" />
												<p:overlayPanel for="step6" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
													<h:outputText escape="false"
														value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date6,transportationRequestView.transportationRequest.user6.username,'y.bouassem')}" />
												</p:overlayPanel>
											</span>
										</li>
									</f:subview>
									<f:subview rendered="#{transportationRequestView.transportationRequest.date7!=null || transportationRequestView.transportationRequest.date9==null}">
										<li class="#{transportationRequestView.transportationRequest.date7!=null?'complete':''}">
											<span class="step">
												<i class="ace-icon fa fa-spinner fa-spin grey" />
											</span>
											<span class="title">
												<h:outputText id="step7" value="#{TransportationRequestStatus.ACKNOWLEDGED.value}" />
												<p:overlayPanel for="step7" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
													<h:outputText escape="false"
														value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date7,transportationRequestView.transportationRequest.deliveryRequest.requester.username)}" />
												</p:overlayPanel>
											</span>
										</li>
									</f:subview>
								</f:subview>
								<f:subview rendered="#{transportationRequestView.transportationRequest.date8!=null}">
									<li class="error">
										<span class="step">
											<i class="ace-icon fa fa-spinner fa-spin grey" />
										</span>
										<span class="title">
											<h:outputText id="step8" value="#{TransportationRequestStatus.REJECTED.value}" />
										</span>
										<p:overlayPanel for="step8" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
											<h:outputText escape="false"
												value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date8,transportationRequestView.transportationRequest.user8.username)}" />
										</p:overlayPanel>
									</li>
								</f:subview>
								<f:subview rendered="#{transportationRequestView.transportationRequest.date9!=null}">
									<li class="error">
										<span class="step">
											<i class="ace-icon fa fa-spinner fa-spin grey" />
										</span>
										<span class="title">
											<h:outputText id="step9" value="#{TransportationRequestStatus.CANCELED.value}" />
										</span>
										<p:overlayPanel for="step9" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
											<h:outputText escape="false"
												value="#{htmlView.generateOverlayPanelContent(transportationRequestView.transportationRequest.date9,transportationRequestView.transportationRequest.user9.username)}" />
										</p:overlayPanel>
									</li>
								</f:subview>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="space-16" />
			<div class="tabbable">
				<ul class="nav nav-tabs padding-18">
					<li class="active">
						<a data-toggle="tab" href="#tab1">
							<i class="green ace-icon fa fa-list-alt bigger-120"></i>
							<h:outputText value=" Informations" styleClass="hidden-xs" />
						</a>
					</li>
					<li>
						<a data-toggle="tab" href="#tab2">
							<i class="blue ace-icon fa fa-file bigger-120"></i>
							<h:outputText value=" Attachements" />
						</a>
					</li>
					<li>
						<a data-toggle="tab" href="#tab3">
							<i class="orange ace-icon fa fa-clock-o bigger-120"></i>
							<h:outputText value=" History" />
						</a>
					</li>
					<li>
						<a data-toggle="tab" href="#tab4">
							<i class="red ace-icon fa fa-dollar bigger-120"></i>
							<h:outputText value=" Associated Costs" />
						</a>
					</li>
				</ul>
				<div class="tab-content no-border padding-24">
					<div id="tab1" class="tab-pane in active">
						<p:messages id="messages" closable="true" />
						<div class="row">
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Reference" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.reference}" styleClass="bolder blue" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Priority" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.priority.value}"
												styleClass="#{transportationRequestView.transportationRequest.deliveryRequest.priority.color}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Origin Site" />
										</div>

										<div class="profile-info-value">
											<h:outputLink value="viewSite.xhtml" target="blank"
												rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isInbound or transportationRequestView.transportationRequest.deliveryRequest.isXbound  }">
												<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.origin.name}" />
												<f:param name="id" value="#{transportationRequestView.transportationRequest.deliveryRequest.origin.id}" />
											</h:outputLink>
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.warehouse.name}" styleClass="blue"
												rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isOutbound}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Needed Pickup Date" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.neededPickupDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Status" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.status.value}" styleClass="#{transportationRequestView.transportationRequest.status.color}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Important" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.important?'Yes':'No'}"
												styleClass="#{transportationRequestView.transportationRequest.deliveryRequest.important?'green':'grey'}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Destination Site" />
										</div>

										<div class="profile-info-value">
											<h:outputLink value="viewSite.xhtml" target="blank"
												rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isOutbound or transportationRequestView.transportationRequest.deliveryRequest.isXbound  }">
												<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.destination.name}" />
												<f:param name="id" value="#{transportationRequestView.transportationRequest.deliveryRequest.destination.id}" />
											</h:outputLink>
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.warehouse.name}" styleClass="purple"
												rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isInbound}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Needed Delivery Date" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.neededDeliveryDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="space-8" />
						<h4 class="header blue bolder smaller">
							<i class="ace-icon fa fa-list"></i>
							<h:outputText value=" Delivery Details" />
						</h4>
						<div class="row">
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Delivery Request" />
										</div>

										<div class="profile-info-value">
											<h:outputLink value="viewDeliveryRequest.xhtml" target="blank">
												<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.reference}"
													styleClass="bolder #{transportationRequestView.transportationRequest.deliveryRequest.type.color}" />
												<f:param name="id" value="#{transportationRequestView.transportationRequest.deliveryRequest.id}" />
											</h:outputLink>
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="DN Project" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.project.name}" styleClass="bolder purple" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Gross Weight" />
										</div>

										<div class="profile-info-value bolder blue">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.grossWeight}">
												<f:convertNumber type="number" maxFractionDigits="2" />
											</h:outputText>
											<h:outputText value=" Kg" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Volume" />
										</div>

										<div class="profile-info-value bolder blue">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.volume}">
												<f:convertNumber type="number" maxFractionDigits="2" />
											</h:outputText>
											<h:outputText value=" m3" />
											&nbsp;
										</div>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="DN Type" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.type.value}"
												styleClass="#{transportationRequestView.transportationRequest.deliveryRequest.type.color}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="DN REF" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.smsRef}" styleClass="bolder orange" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Net Weight" />
										</div>

										<div class="profile-info-value bolder blue">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.netWeight}">
												<f:convertNumber type="number" maxFractionDigits="2" />
											</h:outputText>
											<h:outputText value=" Kg" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Number Of Items" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.numberOfItems}">
												<f:convertNumber type="number" maxFractionDigits="2" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
								</div>
							</div>
						</div>
						<h4 class="header blue bolder smaller">
							<i class="ace-icon fa fa-list"></i>
							<h:outputText value=" Transportation  Details" />
						</h4>
						<div class="row">
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Distance" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.estimatedDistanceText}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Transporter" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.transportationJob.transporter.name}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Expected Pickup Time" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.expectedPickupDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Expected Delivery Time" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.expectedDeliveryDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Transportation Job" />
										</div>

										<div class="profile-info-value">
											<h:outputLink value="viewTransportationJob.xhtml" target="blank" rendered="#{sessionView.isTM}">
												<h:outputText value="#{transportationRequestView.transportationRequest.transportationJob.numero}" styleClass="blue" />
												<f:param name="id" value="#{transportationRequestView.transportationRequest.transportationJob.id}" />
											</h:outputLink>
											<h:outputText value="#{transportationRequestView.transportationRequest.transportationJob.numero}" styleClass="blue" rendered="#{!sessionView.isTM}" />
											&nbsp;
										</div>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6">
								<div class="profile-user-info profile-user-info-striped">
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Estimated Tr Time" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.estimatedDurationText}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Driver / Vehicle" />
										</div>

										<div class="profile-info-value">
											<h:outputText
												value="#{transportationRequestView.transportationRequest.transportationJob.driver.fullName},#{transportationRequestView.transportationRequest.transportationJob.driver.phone} / #{transportationRequestView.transportationRequest.transportationJob.vehicle.correctMatricule}" />
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Pickup Time" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.pickupDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Delivery Time" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.deliveryDate}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
											&nbsp;
										</div>
									</div>
									<div class="profile-info-row">
										<div class="profile-info-name">
											<h:outputText value="Job Status" />
										</div>

										<div class="profile-info-value">
											<h:outputText value="#{transportationRequestView.transportationRequest.transportationJob.status.value}"
												styleClass="bolder #{transportationRequestView.transportationRequest.transportationJob.status.color}" />
											&nbsp;
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="space-16" />
						<div class="row">
							<div class="col-sm-offset-1 col-sm-10">
								<div class="widget-box transparent ">
									<div class="widget-body">
										<ul class="steps">
											<li>
												<span class="step">
													<i class="ace-icon fa #{transportationRequestView.transportationRequest.state==0?'fa-truck grey':transportationRequestView.transportationRequest.state>0?'fa-check green':'fa-remove red'}  " />
												</span>
												<div class="title">
													<div class="widget-box ui-sortable-handle" style="margin: auto; width: 200px">
														<div class="widget-body ">
															<div class="widget-main">
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/adress.jpg" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputLink value="viewSite.xhtml" target="blank"
																			rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isInbound or transportationRequestView.transportationRequest.deliveryRequest.isXbound  }">
																			<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.origin.name}" />
																			<f:param name="id" value="#{transportationRequestView.transportationRequest.deliveryRequest.origin.id}" />
																		</h:outputLink>
																		<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.warehouse.name}" styleClass="blue"
																			rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isOutbound}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/gps.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.originValue}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/user.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.originContactName}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/phone.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.originContactPhone}" />
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</li>
											<li>
												<span class="step">
													<i class="ace-icon fa #{transportationRequestView.transportationRequest.state==1?'fa-truck blue':transportationRequestView.transportationRequest.state>1?'fa-check green':''} " />
												</span>
											</li>
											<li>
												<span class="step">
													<i class="ace-icon fa #{transportationRequestView.transportationRequest.state==2?'fa-truck green':transportationRequestView.transportationRequest.state==-1?'':''} " />
												</span>
												<div class="title">
													<div class="widget-box ui-sortable-handle" style="margin: auto; width: 200px">
														<div class="widget-body ">
															<div class="widget-main">
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/adress.jpg" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputLink value="viewSite.xhtml" target="blank"
																			rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isOutbound or transportationRequestView.transportationRequest.deliveryRequest.isXbound  }">
																			<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.destination.name}" />
																			<f:param name="id" value="#{transportationRequestView.transportationRequest.deliveryRequest.destination.id}" />
																		</h:outputLink>
																		<h:outputText value="#{transportationRequestView.transportationRequest.deliveryRequest.warehouse.name}" styleClass="blue"
																			rendered="#{transportationRequestView.transportationRequest.deliveryRequest.isInbound}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/gps.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.destinationValue}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/user.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.destinationContactName}" />
																	</div>
																</div>
																<div class="space-4" />
																<div class="row">
																	<div class="col-sm-3">
																		<h:graphicImage value="/resources/img/tr/phone.png" width="20" />
																	</div>
																	<div class="col-sm-9" style="text-align: left">
																		<h:outputText value="#{transportationRequestView.transportationRequest.destinationContactPhone}" />
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="space-8" />
						<h4 class="header blue bolder smaller">
							<i class="ace-icon fa fa-map-marker"></i>
							<h:outputText value=" Map" />
						</h4>
						<h:panelGroup id="gmap">
							<!-- <p:gmap widgetVar="map" model="#{transportationRequestView.mapModel}" center="#{transportationRequestView.transportationRequest.deliveryRequest.origin.latitude}, #{transportationRequestView.transportationRequest.deliveryRequest.origin.longitude}" zoom="17" type="TERRAIN"
								style="width:100%;height:500px" /> -->

							<p:gmap widgetVar="map" model="#{transportationRequestView.mapModel}" center="#{transportationRequestView.transportationRequest.originValue}" type="TERRAIN" style="width:100%;height:500px" />
						</h:panelGroup>

						<div class="space-16" />

					</div>
					<div id="tab2" class="tab-pane">
						<div class="row">
							<div class="col-sm-offset-1 col-sm-10">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-9 hidden-xs">
										<i class="fa fa-list" />
										<h:outputText value=" List Of Attachements" />
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="files_table" value="#{transportationRequestView.transportationRequest.fileList}" var="item" rows="20" styleClass="table table-striped table-hover"
										paginatorAlwaysVisible="false" paginator="true" paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}">

										<p:column headerText="Name">
											<h:outputText value="#{item.name}" />
										</p:column>

										<p:column headerText="Type">
											<h:outputText value="#{item.type}" />
										</p:column>

										<p:column headerText="Added Date">
											<h:outputText value="#{item.date}">
												<f:convertDateTime pattern="dd-MM-yyyy" />
											</h:outputText>
										</p:column>

										<p:column headerText="File Size">
											<h:outputText value="#{item.size}" />
										</p:column>

										<p:column headerText="File Type" width="100" styleClass="center">
											<img src="resources/img/docTypes/#{item.extension}.png" style="border: none; border-radius: 0" width="20" height="20" />
										</p:column>

										<p:column headerText="Actions" width="150" style="text-align : center;">
											<div class="action-buttons center">
												<p:commandLink title="Delete File" oncomplete="PF('deleteTransportationRequestFileDlg').show()" styleClass="aa-tooltip">
													<i class="ace-icon fa fa-trash-o bigger-130 red" />
													<f:setPropertyActionListener target="#{transportationRequestView.transportationRequestFileId}" value="#{item.id}" />
												</p:commandLink>

												<p:commandLink ajax="false">
													<p:fileDownload value="#{fileView.getFile(item.link)}" />
													<i class="ace-icon fa fa-save bigger-130 green" />
												</p:commandLink>

												<p:commandLink title="View" oncomplete="PF('fileDlg').show()" update=":fileForm">
													<i class="ace-icon fa fa-list-alt bigger-130 blue" />
													<f:setPropertyActionListener target="#{transportationRequestView.transportationRequestFile}" value="#{item}" />
												</p:commandLink>
											</div>
										</p:column>
									</p:dataTable>
								</div>
							</div>
						</div>
					</div>
					<div id="tab3" class="tab-pane">
						<div class="space-8" />
						<div class="row">
							<div class="col-sm-offset-1 col-sm-10">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-9 hidden-xs">
										<i class="fa fa-list" />
										<h:outputText value=" History" />
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="transportationRequesthistoryList" value="#{transportationRequestView.transportationRequest.historyList}" var="item" rows="20" styleClass="table table-striped table-hover"
										paginatorAlwaysVisible="false" paginator="true" paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}">

										<p:column headerText="Action" width="80" styleClass="center">
											<span class="#{item.statusStyleClass}">
												<h:outputText value="#{item.status}" styleClass="bolder" />
											</span>
										</p:column>

										<p:column headerText="Date" width="90" styleClass="center">
											<f:subview rendered="#{item.date==null}">
												<i class="ace-icon fa fa-spinner fa-spin orange bigger-200 " />
											</f:subview>
											<h:outputText value="#{item.date}" rendered="#{item.date!=null}">
												<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
											</h:outputText>
										</p:column>

										<p:column headerText="User" width="120">
											<h:outputText id="user" value="#{item.user.fullName}" styleClass="purple bolder" />
											<p:overlayPanel for="user" style="text-align: left;width:350px" showEvent="mouseover" hideEvent="mouseout">
												<h:outputText escape="false" value="#{htmlView.generateOverlayPanelContent(item.user.username)}" />
											</p:overlayPanel>
										</p:column>

										<p:column headerText="Description" width="400">
											<h:outputText value="#{item.description}" escape="false" styleClass="aa-cut-text" />
										</p:column>
									</p:dataTable>
								</div>
							</div>
						</div>
					</div>
					<div id="tab4" class="tab-pane">
						<div class="space-8" />
						<div class="row">
							<div class="col-sm-offset-1 col-sm-10">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-9 hidden-xs">
										<i class="fa fa-list" />
										<h:outputText value=" Associated Costs" />
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable value="#{appLinkView.list2}" var="item" rows="20" styleClass="table table-striped table-hover" paginatorAlwaysVisible="false" paginator="true" paginatorPosition="bottom"
										paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}">

										<p:column headerText="Transportation Request" width="100">
											<h:outputText value="#{transportationRequestView.transportationRequest.reference}" styleClass="green bolder" />
										</p:column>

										<p:column headerText="Cost Type" width="150">
											<h:outputText value="#{item.costType.value}" styleClass="red bolder" />
										</p:column>

										<p:column headerText="Start Date" width="80">
											<h:outputText value="#{item.startDate}">
												<f:convertDateTime pattern="dd-MM-yyyy" />
											</h:outputText>
										</p:column>

										<p:column headerText="End Date" width="80">
											<h:outputText value="#{item.endDate}">
												<f:convertDateTime pattern="dd-MM-yyyy" />
											</h:outputText>
										</p:column>

										<p:column headerText="Amount" width="100">
											<h:outputText value="#{item.amount}">
												<f:convertNumber type="number" maxFractionDigits="2" />
											</h:outputText>
										</p:column>

										<p:column headerText="System" width="100">
											<h:outputText value="Ibuy" rendered="#{item.acceptanceId!=null}" styleClass="bolder blue" />
											<h:outputText value="Iexpense" rendered="#{item.expensepaymentId!=null}" styleClass="bolder green" />
										</p:column>

										<p:column headerText="Actions" width="70">
											<div class="action-buttons center">
												<p:commandLink action="#{acceptanceView.refreshAcceptance(item.acceptanceId)}" update=":acceptanceForm" oncomplete="PF('acceptanceDlg').show()" title="Show details"
													styleClass="aa-tooltip tooltip-info" rendered="#{item.acceptanceId!=null}">
													<i class="ace-icon fa fa-list-alt bigger-130 blue" />
												</p:commandLink>

												<p:commandLink action="#{expensepaymentView.refreshExpensepayment(item.expensepaymentId)}" update=":expensepaymentForm" oncomplete="PF('expensepaymentDlg').show()" title="Show details"
													styleClass="aa-tooltip tooltip-info" rendered="#{item.expensepaymentId!=null}">
													<i class="ace-icon fa fa-list-alt bigger-130 blue" />
												</p:commandLink>
											</div>
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</h:form>
		<f:event type="preRenderView" listener="#{transportationRequestView.redirect}" />
		<ui:include src="transportationRequestFooter.xhtml" />
		<ui:include src="acceptanceFooter.xhtml" />
		<ui:include src="expensepaymentFooter.xhtml" />
	</ui:define>
</ui:composition>
